"""Шаблоны промптов для LLM анализа новостей по ТЗ RADAR"""

ENTITY_EXTRACTION_PROMPT = '''
Извлеки финансовые сущности из этой новости:

Новость: {news_text}

Найди и классифицируй:
- Компании (с тикерами если известны)
- Страны/регионы
- Финансовые инструменты (акции, облигации, валюты)
- Ключевые люди (CEO, чиновники)
- Сектора/отрасли

Верни в формате JSON:
{{
  "companies": [{{"name": "Apple Inc.", "ticker": "AAPL", "sector": "Технологии"}}],
  "countries": ["США", "Китай"],
  "instruments": ["акции", "облигации"],
  "people": ["Тим Кук"],
  "sectors": ["технологии", "финансы"]
}}
'''

WHY_NOW_PROMPT = '''
Объясни почему эта финансовая новость важна ИМЕННО СЕЙЧАС в 1-2 предложениях:

Новость: {news_text}
Контекст: {context}

Сосредоточься на:
- Что изменилось по сравнению с прошлым
- Почему это время критично
- Драйверы реакции рынка

Ответ должен быть кратким и объяснять немедленную значимость.
'''

TIMELINE_PROMPT = '''
Создай временную шкалу событий для этой финансовой истории:

Статьи новостей: {news_group}

Извлеки ключевые временные метки и события. Верни в JSON:
{{
  "timeline": [
    {{"time": "2025-10-03T10:00:00Z", "event": "Первые слухи о сделке"}},
    {{"time": "2025-10-03T12:30:00Z", "event": "Официальное подтверждение"}},
    {{"time": "2025-10-03T14:00:00Z", "event": "Реакция рынка +15%"}}
  ]
}}
'''

DRAFT_GENERATION_PROMPT = '''
Создай черновик финансовой статьи:

Новость: {news_text}
Сущности: {entities}
Почему сейчас: {why_now}

Создай:
- Цепляющий заголовок (макс 60 символов)
- Лид-абзац (2-3 предложения)
- 3 ключевых пункта
- Релевантная цитата или ссылка

Формат JSON:
{{
  "headline": "Краткий заголовок",
  "lead": "Первый абзац с основной информацией...",
  "bullets": [
    "Ключевой факт 1",
    "Ключевой факт 2", 
    "Ключевой факт 3"
  ],
  "quote": "Значимая цитата - Источник"
}}
'''

HEADLINE_GENERATION_PROMPT = '''
Создай краткий заголовок (максимум 50 символов) для финансовой новости:

Новость: {news_text}
Ключевые сущности: {entities_str}

Заголовок должен быть информативным и привлекающим внимание.
Отвечай только заголовком, без дополнительного текста.
'''

BATCH_ANALYSIS_PROMPT = '''
Проанализируй несколько связанных финансовых новостей как группу:

Статьи: {articles}

Для этого новостного кластера:
1. Создай единый заголовок
2. Объясни почему это горячо сейчас
3. Построй комплексную временную шкалу
4. Создай черновик статьи

Сосредоточься на самых значимых аспектах и влиянии на рынок.

Верни структурированный JSON со всеми компонентами.
'''